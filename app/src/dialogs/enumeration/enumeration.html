<div class="ui small modal">
    <i class="close icon"></i>
    <div class="header">
        Enumerated Values
    </div>
    <div class="content">
        <div class="ui secondary pointing menu" data-bind="visible: !publishedObs()">
            <div class="item" data-bind="css:{active:isActive('editor')}, click: setTab('editor')">
                Edit List
            </div>
            <div class="item" data-bind="css:{active:isActive('existing')}, click: setTab('existing')">
                Use Existing List
            </div>
        </div>
        <div data-bind="visible: isActive('editor')" style="margin-bottom: -1.5rem">
            <div class="ui two column grid">
                <div class="column">
                    <div class="ui list listZone" data-bind="foreach: listObs">
                        <div class="item element-enum">
                            <i class="trash icon" data-bind="visible: !$parent.publishedObs(), click: $parent.removeListItem"></i>
                            <div class="content">
                                <div class="header">
                                    <span data-bind="text: label"></span>
                                    <span style="font-weight: normal" data-bind="visible: $parent.hasDetail($data)">
                                        &mdash;<span data-bind="text: detail"></span>
                                    </span>
                                </div>
                                <div class="description" data-bind="visible: label != value">
                                    Recorded on server as &ldquo;<span data-bind="text: value"></span>&rdquo;
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <form class="ui form" data-bind="visible: !publishedObs()">
                        <h4 class="ui dividing header">Add New List Item</h4>
                        <div class="field">
                            <ui-text params="fieldObs: labelObs, publishedObs: publishedObs,
                                placeholder: 'Label', keyHandler: handleKeyEvent, hasFocus: labelFocusedObs"></ui-text>
                        </div>
                        <div class="field">
                            <ui-text params="fieldObs: detailObs, publishedObs: publishedObs,
                                placeholder: 'Detail (optional)', keyHandler: handleKeyEvent"></ui-text>
                        </div>
                        <div class="field">
                            <ui-text params="fieldObs: valueObs, publishedObs: publishedObs,
                                placeholder: 'Server value (optional)', keyHandler: handleKeyEvent"></ui-text>
                        </div>
                        <div class="field">
                            <a href="#" data-bind="click: addListItem" class="ui button">Add</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div data-bind="visible: isActive('existing')">
            <div data-bind="foreach: allLists" class="ui list">
                <div class="item">
                    <i class="list layout icon"></i>
                    <div class="content">
                        <a href="#" data-bind="click: $parent.selectList, html: $data.name"></a> (<span data-bind="text: $data.occurrences"></span>)
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="rules-actions" data-bind="visible: !publishedObs() && isActive('editor')">
        <div style="margin-bottom:1rem">
            <div class="ui dropdown" data-bind="semantic: 'checkbox', click: toggleCopyObs">
                <input type="checkbox" class="hidden" data-bind="checked: copyObs, disable: publishedObs"/>
                <label>Update every instance of this list (in every question)</label>
            </div>
        </div>
        <button data-bind="click: saveList, disable: listObs().length === 0" class="ui primary button">Save</button>
        <button data-bind="click: cancel" class="ui button">Cancel</button>
    </div>
    <div class="rules-actions" data-bind="visible: !publishedObs() && isActive('existing')">
        <button data-bind="click: cancel" class="ui button">Cancel</button>
    </div>
    <div class="rules-actions" data-bind="visible: publishedObs">
        <button data-bind="click: cancel" class="ui button">Close</button>
    </div>
</div>
