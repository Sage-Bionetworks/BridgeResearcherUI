<div class="fixed-header">
  <div class="fixed-header-title">
    <div class="fixed-header-heading">
      <h3>Email Templates</h3>
    </div>
    <div class="fixed-header-buttons">
      <button class="ui tiny primary button" data-bind="click: save">Save</button>
    </div>
  </div>
  <template-tabset></template-tabset>
</div>
<div class="scrollbox">
  <div class="subtab-button-selector">
    <div class="field">
      <ui-checkbox params="checkedObs: autoVerificationEnabledObs">
        Verify an email address as part of sign up
      </ui-checkbox>
    </div>
    <div class="tiny ui buttons">
      <a class="ui button" href="#/email_templates/verify_email">
        Verify Email Address
      </a>
      <a class="active ui button" href="#/email_templates/verify_email/account_exists">
        Account Exists
      </a>
    </div>
  </div>
  <div class="ui grid">
    <div class="ten wide column">
      <errors></errors>
      <form class="ui form" data-bind="attr: {disabled: !autoVerificationEnabledObs()}">
        <div class="required field" id="accountExistsTemplate_subject">
          <label>Subject</label>
          <input
            type="text"
            name="subject"
            data-bind="textInput: subjectObs, hasFocus: true,         attr: {disabled: !autoVerificationEnabledObs()}"
          />
        </div>
        <div class="field" id="accountExistsTemplate_body">
          <textarea id="rpTemplate" data-bind="ckeditor: $component.initEditor" class="ui textarea doc"></textarea>
        </div>
      </form>
    </div>
    <div class="six wide column">
      <div class="ui message">
        <p>
          If a user tries to sign up twice for the same study, and the study is configured to send a verification email,
          we will send this email message instead. It notes the account already exists, and provides a link to reset the
          password or sign in via email (depending on your study's design).
        </p>

        <p>
          <strong
            >It <em>must</em> contain the value <code>${resetPasswordUrl}</code> or
            <code>${emailSignInUrl}</code>.</strong
          >
          Most web email clients will link these URLs automatically, but you can also create a link.
        </p>

        <p>There are other values available for use in your template:</p>

        <dl>
          <dt>${studyName}</dt>
          <dd>the name you entered for your study</dd>

          <dt>${studyShortName}</dt>
          <dd>the short name you entered for your study</dd>

          <dt>${sponsorName}</dt>
          <dd>the name you entered for the group sponsoring the study</dd>

          <dt>${supportEmail}</dt>
          <dd>your support email address</dd>

          <dt>${resetPasswordExpirationPeriod}</dt>
          <dd>the period before the reset password link in the email will expire (e.g. "1 day")</dd>

          <dt>${emailSignInExpirationPeriod}</dt>
          <dd>the period before the authentication link in the email will expire (e.g. "2 hours")</dd>
        </dl>
      </div>
    </div>
  </div>
</div>
