<div class="fixed-header">
  <div class="fixed-header-title">
    <div class="fixed-header-heading">
      <sp-breadcrumb params="studyIdObs: navStudyIdObs, studyNameObs: navStudyNameObs">
      </sp-breadcrumb>
      <h3 data-bind="text: titleObs"></h3>
    </div>
    <div class="fixed-header-buttons">
    </div>
  </div>
  <studyparticipant-tabset params="studyIdObs: navStudyIdObs, userIdObs: userIdObs, 
        statusObs: statusObs, dataGroupsObs: dataGroupsObs"></studyparticipant-tabset>
</div>
<bsm-layout id="studyparticipant-adherence">
  <div slot="header">
    <div class="ui small secondary menu">
      <span class="active item">Adherence</span>
      <a class="item" data-bind="href: link('schedule/adherencesearch')">Search</a>
      <a class="item" data-bind="href: link('schedule/events')">Schedule Events</a>
      <a class="item" data-bind="href: link('schedule/timeline')">Timeline</a>
    </div>
  </div>
  <div slot="content">
    <event-stream-adherence-report 
      params="reportObs: reportObs, editSession: editSession"></event-stream-adherence-report>
    <div style="display:flex; margin: 1rem .75rem 0 .75rem">
      <ui-checkbox params="checkedObs: activeOnlyObs" style="flex:1">
        Show active sessions only
      </ui-checkbox>
      <div>
        <b>Participantâ€™s Time:</b> 
        <span data-bind="text: formatDateTime(dateObs())"></span>
      </div>
    </div>
  </div>
  <div slot="help">
    <table class="adherence-table" style="overflow-x: auto; border: none">
      <tr>
        <td class="data-cell" style="width:2">
          <div class="today" style="width:1.5rem">&#160;</div>
        </td>
        <td style="padding-left:.5rem">
          Current day of stream
        </td>
      </tr>
      <tr>
        <td class="data-cell" style="width:2rem">
          <div class="bar not_yet_available"></div>
        </td>
        <td style="padding-left:.5rem">
          Not yet available
        </td>
      </tr>
      <tr>
        <td class="data-cell" style="width:2rem">
          <div class="bar unstarted"></div>
        </td>
        <td style="padding-left:.5rem">
          Available but unstarted
        </td>
      </tr>
      <tr>
        <td class="data-cell" style="width:2rem">
          <div class="bar started"></div>
        </td>
        <td style="padding-left:.5rem">
          Started with time to finish
        </td>
      </tr>
      <tr>
        <td class="data-cell" style="width:2rem">
          <div class="bar completed"></div>
        </td>
        <td style="padding-left:.5rem">
          Successfully completed
        </td>
      </tr>
      <tr>
        <td class="data-cell" style="width:2rem">
          <div class="bar abandoned"></div>
        </td>
        <td style="padding-left:.5rem">
          Expired unfinished (abandoned)
        </td>
      </tr>
      <tr>
        <td class="data-cell" style="width:2rem">
          <div class="bar expired"></div>
        </td>
        <td style="padding-left:.5rem">
          Expired never started
        </td>
      </tr>
      <tr>
        <td class="data-cell" style="width:2rem">
          <div class="bar declined"></div>
        </td>
        <td style="padding-left:.5rem">
          Declined
        </td>
      </tr>
      <tr>
        <td class="data-cell" style="width:2rem">
          <div class="bar not_applicable"></div>
        </td>
        <td style="padding-left:.5rem">
          Not applicable
        </td>
      </tr>
    </table>
    <p>Persistent session windows are excluded from adherence reports.</p>
    <p>
      <a class="link" data-bind="click: () => preview('eventstream')">
        View event stream report JSON
      </a><br>
      <a class="link" data-bind="click: () => preview('weekly')">
        View weekly report JSON
      </a>
      <a class="link" data-bind="click: () => preview('allWeeklies')">
        View weekly reports JSON
      </a>
    </p>
  </div>
</bsm-layout>
