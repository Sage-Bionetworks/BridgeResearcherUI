<div class="ui breadcrumb">
    <a href="#/schemas" class="section">Upload Schemas</a>
</div>

<div class="ui warning message" data-bind="visible: publishedObs">
    <p>You are viewing an older version of the schema (revision <span data-bind="text: revisionObs"></span>). It cannot be edited. </p>
</div>

<h3 data-bind="visible: nameObs().length > 0, text: nameObs"></h3>
<h3 data-bind="visible: nameObs().length === 0">New Upload Schema</h3>

<form-message params="messageObs: messageObs"></form-message>

<div class="ui secondary larger pointing menu">
    <a class="active item">
        <i class="file outline icon"></i> Editor
    </a>
    <a href="#" data-bind="attr: {href: '#/schemas/'+schemaIdObs()+'/versions'}, visible: !!revisionObs()" class="item">
        <i class="history icon"></i> History
    </a>
</div>

<div class="button-container">
    <button class="ui primary button" data-bind="visible: !publishedObs(), click: save">Save</button>
</div>

<form class="ui form">
    <div class="two fields">
        <div class="required field">
            <label>Name</label>
            <ui-text params="fieldObs: nameObs, publishedObs: publishedObs"></ui-text>
        </div>
        <div class="required field">
            <label>Schema Type</label>
            <ui-select params="fieldObs: schemaTypeObs, fieldLabel: schemaTypeLabel,
                    publishedObs: publishedObs, optionsSrc: schemaTypeOptions"></ui-select>
        </div>
    </div>
    <div class="two fields">
        <div class="required field">
            <label>Identifier</label>
            <ui-text params="fieldObs: schemaIdObs, publishedObs: publishedObs"></ui-text>
        </div>
    </div>
</form>

<h3>Field Definitions</h3>

<div data-bind="visible: itemsObs().length === 0">
    <p>There are currently no field definitions in this upload schema.</p>
    <!-- ko component: {
        name: "add-control",
        params: { itemsObs: itemsObs, index: 0, publishedObs: publishedObs }
    } --><!-- /ko -->
</div>
<div class="survey elementZone" data-bind="foreach: itemsObs">
    <div class="element" data-bind="component: {
        name: 'field_definition',
        params: { field: $data, itemsObs: $parent.itemsObs, indexObs: $index, publishedObs: $parent.publishedObs }
    }"></div>
    <!-- ko component: {
        name: "add-control",
        params: { itemsObs: $parent.itemsObs, index: $index, publishedObs: $parent.publishedObs }
    } --><!-- /ko -->
</div>

