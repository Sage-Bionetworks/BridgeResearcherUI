<div class="fixed-header">
    <div class="fixed-header-title">
        <div class="fixed-header-heading">
            <div class="ui breadcrumb">
                <a class="section" href="#/participants">Participants</a>
                <i class="right chevron icon divider"></i>
            </div>            
            <h3 data-bind="html: titleObs"></h3>
        </div>
        <div class="fixed-header-buttons">
            <div data-bind="semantic: 'dropdown-button', visible: !isNewObs()">
                <div class="text">Actions</div>
                <i class="dropdown icon"></i>
                <div class="menu">
                    <div class="item" data-bind="click: requestResetPassword, visible: isPublicObs">Send reset password email</div>
                    <div class="item" data-bind="visible: showEnableAccountObs() && isAdmin(), 
                        click: enableAccount">Enable Account</div>
                    <div class="item" data-bind="visible: !showEnableAccountObs() && isAdmin(), 
                        click: disableAccount">Disable Account</div>
                    <div class="item" data-bind="click: signOutUser">Sign out user</div>
                </div>
            </div>
            <button class="ui tiny primary button" data-bind="click: save">Save</button>
        </div>
    </div>
    <!-- ko component: {name: 'participant-tabset', params: {isNewObs: isNewObs, 
        showEnableAccountObs: showEnableAccountObs, isPublicObs: isPublicObs,
        userIdObs: userIdObs, statusObs: statusObs
    }} --><!-- /ko -->
</div>
<div class="scrollbox">
    <errors></errors>
    <form class="ui form">
        <div class="equal width fields">
            <div class="field" data-bind="visible: isPublicObs">
                <label>Name</label>
                <div class="two fields" style="margin-right:.1rem">
                    <input type="text" style="margin-left:.4rem" placeholder="First Name" 
                        data-bind="textInput: firstNameObs, hasFocus: true" />&#160;&#160;
                    <input type="text" data-bind="textInput: lastNameObs" placeholder="Last Name"/>
                </div>
            </div>
            <div class="field">
                <label>Sharing Scope</label>
                <select class="ui dropdown" data-bind="options: sharingScopeOptions, optionsText: 'label', 
                    optionsValue: 'value', value: sharingScopeObs"></select>
            </div>
            <div class="field">
                <label>Roles</label>
                <select multiple data-bind="semantic: 'multi-search-select', 
                    updateSelect: rolesObs, foreach: allRolesObs">
                    <option data-bind="text: $data, selected: $component.rolesObs().indexOf($data) > -1"></option>
                </select>
            </div>
            <div class="field" data-bind="visible: !isPublicObs()">
            </div>
        </div>
        
        <div class="equal width fields">
            <div class="required field" data-bind="visible: isNewObs" id="email">
                <label>Email</label>
                <input type="text" data-bind="textInput: emailObs"/>
            </div>
            <div class="field" data-bind="visible: isNewObs" id="phone">
                <label>Phone</label>
                <div class="ui left labeled input">
                    <div class="ui basic dropdown label" data-bind="semantic: 'dropdown', click: updateRegion">
                        <div class="text" data-bind="text: phoneRegionObs"></div>
                        <i class="dropdown icon"></i>
                        <div class="menu">
                            <div class="item">US</div>
                            <div class="item">CA</div>
                            <div class="item">MX</div>
                        </div>
                    </div>
                    <input type="text" placeholder="Phone number" data-bind="textInput: phoneObs">
                </div>        
            </div>
            <div class="field" id="externalId">
                <label>External ID</label>
                <input type="text" data-bind="textInput: externalIdObs"/>
            </div>
            <div class="field" data-bind="visible: !isNewObs()">
                <label>Health Code</label>
                <input readonly data-bind="value: healthCodeObs"/>
                <span class="help-text ui small red text" data-bind="visible: healthCodeObs() !== 'N/A'">
                    Confidential. Do not redistribute.
                </span>
            </div>
            <div class="field" data-bind="visible: !isNewObs()">
                <label>User ID</label>
                <input type="text" readonly data-bind="value: idObs"/>
            </div>
        </div>
        <div class="equal width fields">
            <div class="required field" data-bind="visible: isNewObs" id="password">
                <label>Password</label>
                <input type="password" autocomplete="new-password" data-bind="textInput: passwordObs"/>
            </div>
            <div class="field">
                <label>Languages</label>
                <input type="text" data-bind="textInput: languagesObs"/>
                <div class="help-text">
                    For example, "en, fr"
                </div>
            </div>
            <div class="field">
                <label>Data Groups</label>
                <select multiple data-bind="semantic: 'multi-search-select', 
                    updateSelect: dataGroupsObs, foreach: allDataGroupsObs">
                    <option data-bind="text: $data, 
                        selected: $component.dataGroupsObs().indexOf($data) > -1"></option>
                </select>
            </div>
            <div class="field" data-bind="visible: !isPublicObs()">
                <label>Created On</label>
                <div data-bind="text: createdOnObs"></div>
            </div>
            <div class="field" data-bind="visible: isPublicObs() && !isNewObs()">
                <label style="margin-bottom: .9rem">Email Preference</label>
                <ui-checkbox params="checkedObs: notifyByEmailObs">
                    Consents to receive email from study
                </ui-checkbox>
            </div>
        </div>
        <div class="equal width fields" data-bind="visible: !isNewObs()">
            <div class="field">
                <label>Email</label>
                <a class="input-field-padding" data-bind="href: emailLink, text: emailObs"></a>
            </div>
            <div class="field">
                <label>Phone</label>
                <a class="input-field-padding" data-bind="href: phoneLink, text: phoneObs"></a>
            </div>
            <div class="field">
                <label>Created On</label>
                <div class="input-field-padding" data-bind="text: createdOnObs"></div>
            </div>
        </div>
        <h4 class="ui dividing header">Attributes</h4>
        <div class="equal width fields">
            <!-- ko foreach: attributesObs -->
                <div class="field" style="margin-right: 2rem; max-width: 12rem">
                    <label data-bind="text: $data.label"></label>
                    <input type="text" data-bind="textInput: $data.obs"/>
                </div>
            <!-- /ko -->
        </div>
    </form>
</div>
