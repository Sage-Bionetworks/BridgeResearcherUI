<div class="fixed-header">
    <div class="fixed-header-title">
        <div class="fixed-header-heading">
            <span class="section">
                <a href="#/participants" class="section">Participants</a>
            </span>
            <h3 data-bind="text: titleObs">
            </h3>
        </div>
        <div class="fixed-header-buttons">
            <button class="ui small primary button" data-bind="click: save">Save</button>
            <button class="ui small button" data-bind="click: signOutUser, visible: !isNewObs()">Sign out user</button>
        </div>
    </div>
    <!-- ko component: {name: 'participant-tabset', params: {active: 'info', isNewObs: isNewObs}} --><!-- /ko -->
</div>
<div class="scrollbox">
    <errors></errors>
    <form class="ui form">
        <div class="equal width fields">
            <div class="field">
                <label>Name</label>
                <div class="two fields">
                    <ui-text params="fieldObs: firstNameObs, placeholder: 'First Name'"></ui-text>
                    &#160;&#160;
                    <ui-text params="fieldObs: lastNameObs, placeholder: 'Last Name'"></ui-text>
                </div>
            </div>
            <div class="field">
                <label>Sharing Scope</label>
                <select class="ui dropdown" data-bind="options: sharingScopeOptions, optionsText: 'label', 
                    optionsValue: 'value', value: sharingScopeObs"></select>
            </div>
            <div class="field">
                <label>Roles</label>
                
                <select multiple="" data-bind="semantic: 'multi-search-select', updateSelect: rolesObs, foreach: allRolesObs">
                    <option data-bind="text: $data, selected: $component.rolesObs().indexOf($data) > -1"></option>
                </select>
            </div>
        </div>
        
        <div class="equal width fields">
            <div class="required field" data-bind="visible: isNewObs" id="email">
                <label>Email</label>
                <ui-text params="fieldObs: emailObs"></ui-text>
            </div>
            <div class="field" data-bind="css:{'noLeftPadding': !isNewObs()}">
                <label>Data Groups</label>
                <select multiple="" data-bind="semantic: 'multi-search-select', updateSelect: dataGroupsObs, foreach: allDataGroupsObs">
                    <option data-bind="text: $data, selected: $component.dataGroupsObs().indexOf($data) > -1"></option>
                </select>
            </div>
            <div class="field">
                <label>Languages</label>
                <ui-text params="fieldObs: languagesObs"></ui-text>
                <div class="help-text">
                    For example, "en, fr"
                </div>
            </div>
            <div class="field" data-bind="visible: !isNewObs()">
                <label>Health Code</label>
                <div class="input-field" data-bind="text: healthCodeObs"></div>
                <div class="help-text ui red label" data-bind="visible: healthCodeObs() !== 'N/A'">
                    This code is confidential. Do not redistribute.
                </div>
            </div>
        </div>
        
        <div class="equal width fields">
            <div class="required field" data-bind="visible: isNewObs" id="password">
                <label>Password</label>
                <input type="password" data-bind="textInput: passwordObs"/>
            </div>
            <div class="field" id="externalId" data-bind="css:{'noLeftPadding': !isNewObs()}">
                <label>External ID</label>
                <ui-text params="fieldObs: externalIdObs"></ui-text>
            </div>
            <div class="field" style="margin-bottom:2rem">
                <label>Preferences</label>
                <ui-checkbox params="checkedObs: notifyByEmailObs">
                    Consents to receive email from study
                </ui-checkbox>
            </div>
            <div class="field" data-bind="visible: !isNewObs()">
                <label>Status</label>
                <select class="ui dropdown" data-bind="options: statusOptions, optionsText: 'label', 
                    optionsValue: 'value', value: statusObs"></select>
            </div>
        </div>
        
        <div class="equal width fields">
            <!-- ko foreach: attributesObs -->
                <div class="field" style="margin-right: 2rem; max-width: 12rem">
                    <label data-bind="text: $data.label"></label>
                    <ui-text params="fieldObs: $data.obs"></ui-text>
                </div>
            <!-- /ko -->
        </div>
        
        <div class="equal width fields" data-bind="visible: !isNewObs()">
            <div class="field">
                <label>Email</label>
                <div class="input-field">
                    <a data-bind="attr:{href: 'mailto:'+emailObs()}, text: emailObs"></a>
                </div>
            </div>
            <div class="field">
                <label>Created On</label>
                <div class="input-field" data-bind="text: createdOnObs"></div>
            </div>
            <div class="field"></div>
        </div>
    </form>
</div>
