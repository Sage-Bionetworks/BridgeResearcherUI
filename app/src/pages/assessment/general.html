<div class="fixed-header">
  <div class="fixed-header-title">
    <div class="fixed-header-heading">
      <div class="ui breadcrumb">
        <a href="#/assessments" class="section">Assessments</a>
        <i class="right chevron icon divider"></i>
      </div>
      <h3 data-bind="text: pageTitleObs"></h3>
    </div>
    <div class="fixed-header-buttons" data-bind="visible: canEditObs">
      <button data-bind="click: publish" class="ui tiny button">Publish</button>
      <button class="ui tiny primary button" data-bind="click: save">Save</button>
    </div>
  </div>
  <assessment-tabset params="isNewObs: isNewObs, guidObs: guidObs, 
    revisionObs: pageRevObs, originGuidObs: originGuidObs, canEditObs: canEditObs">
  </assessment-tabset>
</div>
<div class="scrollbox">
  <errors id="assessment"></errors>
  <p> View the <a data-bind="href: createHistoryLink"> 
    <i style="margin-right:0" class="history icon"></i>Edit History</a> of this assessment.
  </p>
  <form class="ui skinny form">
    <div class="two fields">
      <div class="required field" id="title">
        <label>Title</label>
        <input type="text" data-bind="textInput: titleObs, hasFocus: true, visible: canEditObs" />
        <div class="input-field-padding" data-bind="text: titleObs, visible: !canEditObs()"></div>
      </div>
      <div class="field" id="revision" style="width: 10rem">
        <label>Revision</label>
        <input type="text" data-bind="textInput: revisionObs, visible: canEditObs" />
        <div class="input-field-padding" data-bind="text: revisionObs, visible: !canEditObs()"></div>
      </div>
    </div>
    <div class="two fields">
      <div class="required field" id="identifier">
        <label>Identifier</label>
        <input type="text" data-bind="textInput: identifierObs, visible: isNewObs" />
        <div class="input-field-padding" data-bind="text: identifierObs, visible: !isNewObs()"></div>
      </div>
      <div class="required field" id="ownerId">
        <label>Organization</label>
        <select class="ui dropdown" data-bind="visible: isNewObs(), options: orgOptionsObs,
          optionsText: 'label', optionsValue: 'value', value: ownerIdObs,
          optionsCaption: 'Select owner...'">
        </select>
        <div class="input-field-padding" data-bind="text: formatOrgId(ownerIdObs()), visible: !isNewObs()"></div>
      </div>
    </div>
    <div class="two fields">
      <div class="field" id="summary">
        <label>Summary</label>
        <textarea id="summary" data-bind="textInput: summaryObs, visible: canEditObs" class="ui textarea"></textarea>
        <div class="input-field-padding" data-bind="text: summaryObs, !visible: canEditObs()"></div>
      </div>
      <div class="field">
        <div class="required field" id="osName">
          <label>Operation System</label>
          <select class="ui dropdown" data-bind="options: osNameOpts,
            optionsText: 'label', optionsValue: 'value', value: osNameObs,
            optionsCaption: 'Select operating system...', visible: canEditObs">
          </select>
          <div class="input-field-padding" data-bind="text: osNameObs, !visible: canEditObs()"></div>
        </div>
        <div class="field" id="tags" style="margin-top: 1rem" data-bind="visible: canEditObs">
          <label>Tags</label>
          <tag-editor params="selectedObs: tagsObs, 
            allObs: allTagsObs, type: 'tags'"></tag-editor>
          <div class="ui small action input" style="margin-top: 1rem">
            <input type="text" data-bind="textInput: $component.addTagObs, 
              event: {keypress: $component.keyHandler}, hasFocus: true"/>
            <button class="ui small button" data-bind="click: $component.addTag">New Tag</button>
          </div>
        </div>
        <div class="field" id="tags" style="margin-top: 1rem" data-bind="visible: !canEditObs()">
          <label>Tags</label>
          <div class="input-field-padding" class="text: tagsObs().join(', ')"></div>
        </div>
      </div>
    </div>
    <div class="two fields">
      <div class="field" id="validationStatus">
        <label>Validation Status</label>
        <textarea id="validationStatus" data-bind="textInput: validationStatusObs, 
          visible: canEditObs()" class="ui textarea"></textarea>
        <div class="input-field-padding" data-bind="text: validationStatusObs, !visible: canEditObs()"></div>
      </div>
      <div class="field" id="normingStatus">
        <label>Norming Status</label>
        <textarea id="normingStatus" data-bind="textInput: normingStatusObs, 
          visible: canEditObs()" class="ui textarea"></textarea>
        <div class="input-field-padding" data-bind="text: normingStatusObs, !visible: canEditObs()"></div>
      </div>
    </div>
    <div class="two fields">
      <div class="field">
        <label>Created On</label>
        <div class="input-field-padding" data-bind="text: formatDateTime(createdOnObs())"></div>
      </div>
      <div class="field">
        <label>Modified On</label>
        <div class="input-field-padding" data-bind="text: formatDateTime(modifiedOnObs())"></div>
      </div>
    </div>
  </form>
</div>