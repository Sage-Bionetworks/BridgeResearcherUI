<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Bridge Study Manager</title>
    <!--Not clear if this is doing anything, but what the heck-->
    <script src="//cdn.polyfill.io/v1/polyfill.min.js"></script>
    <script src="//cdn.ckeditor.com/4.5.7/full/ckeditor.js"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/semantic.min.css"/>
</head>
<body style="opacity:0.0; color: #202020">
    <header data-bind="visible: showNavigationObs">
        <h2><i class="white heartbeat icon"></i> Bridge Study Manager</h2>
        <div class="header-env">
            <span data-bind="html: studyNameObs"></span>
            <span> on </span>
            <span data-bind="text: environmentObs"></span>
        </div>
    </header>
    <section>
        <main data-bind="component: {name: mainPage, params: mainParams}">
        </main>
        <nav data-bind="visible: showNavigationObs">
            <div class="ui pointing menu" data-bind="visible: isEditorPanelVisible">
                <a class="item" data-bind="active: !isEditorTabVisible(), click: toggleEditorTab">Navigation</a>
                <a class="item" data-bind="active: isEditorTabVisible, click: toggleEditorTab">Editor</a>
            </div>
            <div data-bind="visible: isEditorTabVisible,
                component: {name: editorPanel, params: editorParams}">
            </div>
            <div class="ui vertical menu" data-bind="visible: !isEditorTabVisible()">
                <div class="item" data-bind="visible: isDeveloper">
                    <i class="lab icon"></i> Study
                    <div class="menu">
                        <a href="#/info" class="item" data-bind="active: isActive">
                            Settings
                        </a>
                        <a href="#/ve_template" class="item" data-bind="active: isActive, visible: isDeveloper">
                            Email Templates
                        </a>
                        <a href="#/subpopulations" class="item" data-bind="active: isActive">
                            Consent Groups
                        </a>
                        <a href="#/participants" class="item" data-bind="active: isActive, visible: isResearcher">
                            Participants
                        </a>
                        <a href="#/externalIds" class="item" data-bind="active: isActive, visible: isDeveloper">
                            External Identifiers
                        </a>
                        <a href="#/lilly" class="item" data-bind="active: isActive, visible: studyIdentifierObs() === 'lilly-1'">
                            Eli Lilly Onboarding
                        </a>
                    </div>
                </div>
                <div class="item" data-bind="visible: isDeveloper">
                    <i class="server icon"></i> Study Data
                    <div class="menu">
                        <a href="#/scheduleplans" class="item" data-bind="active: isActive">
                            Scheduling
                        </a>
                        <a href="#/schemas" class="item" data-bind="active: isActive">
                            Data Schemas
                        </a>
                        <a href="#/task_identifiers" class="item" data-bind="active: isActive">
                            Task Identifiers
                        </a>

                        <a href="#/surveys" class="item" data-bind="active: isActive">
                            Surveys
                        </a>
                    </div>
                </div>
                <div class="item" data-bind="visible: isAdmin">
                    <i class="settings icon"></i> Administration
                    <div class="menu">
                        <a href="#/admin/info" class="item" data-bind="active: isActive">
                            Study Settings
                        </a>
                        <a href="#/admin/cache" class="item" data-bind="active: isActive">
                            Cache Control
                        </a>
                    </div>
                </div>
                <div class="item">
                    <i class="sign out icon"></i> <a href="#" data-bind="click: signOut">Sign Out</a>
                </div>
            </div>
        </nav>
    </section>
    <footer>
        <p>&copy; 2015-2016 Sage Bionetworks. </p>
    </footer>
    <div data-bind="modal: dialogObs"></div>
    
    <div class="nav-content" style="left: 16rem" data-bind="visible: showNavigationObs, click: hideNav">
        <i class="content icon"> </i>
    </div>
    <div class="nav-content" style="top: .5rem; left: .5rem" data-bind="visible: !showNavigationObs(), click: showNav">
        <i class="content icon"> </i>
    </div>
    <script src="dist/bundle.js"></script>
</body>
</html>
