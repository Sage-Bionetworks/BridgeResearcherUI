<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Bridge Study Manager</title>
    <!--Not clear if this is doing anything, but what the heck-->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css"/>
    <script src="//cdn.ckeditor.com/4.7.1/full/ckeditor.js"></script>
</head>
<body style="opacity:0.0; color: #202020">
    <header data-bind="visible: showNavigationObs, css: {dev: isDevEnvObs}">
        <h2 data-bind="text: studyNameObs"></h2>
        <div class="header-study-name">
            <span>Bridge Study Manager</span>
            <i class="white heartbeat icon"></i> 
        </div>
    </header>
    <section>
        <main data-bind="component: {name: mainPageObs, params: mainParamsObs}">
        </main>
        <nav data-bind="visible: showNavigationObs">

            <div data-bind="semantic: 'accordion', visible: isSidebarActive('editor')"
                style="margin-bottom: 1rem">
                <div class="active title">
                    <i class="server icon"></i> Editor
                    <i class="dropdown icon"></i>
                </div>
                <div class="active content" data-bind="component: {
                    name: editorPanelObs, params: editorParamsObs}"
                    style="padding:0!important">
                </div>
            </div>

            <div data-bind="semantic: 'accordion', visible: clipboard.entries().length > 0"
                style="margin-bottom: 1rem">
                <div class="active title">
                    <i class="paste icon"></i> Clipboard
                    <i class="dropdown icon"></i>
                </div>
                <div class="active content scroll-container">
                    <div class="ui secondary vertical menu vertical-scrollbox" 
                        data-bind="foreach: clipboard.entries">
                        <div class="item" data-bind="text: $data._label"></div>
                    </div>
                    <div class="item" style="padding: .5rem; text-align: center">
                        <button data-bind="click: clipboard.clearAll" class="ui compact mini button">
                            <i class="remove icon"></i>Clear All
                        </button>
                        <button data-bind="click: clipboard.pasteAll" class="ui compact mini button">
                            <i class="paste icon"></i>Paste All
                        </button>
                        <div style="text-align: left; line-height:1; margin-top: .5rem">
                            <i style="font-size:smaller">
                                Clipboard items can be transferred between studies. 
                                <a class="link" data-bind="click: readAboutClipboard">Read More</a>
                            </i>
                        </div>
                    </div>
                </div>
            </div>

            <div data-bind="semantic: 'accordion'">
                <div class="title" data-bind="visible: !isSharedStudy()">
                    <i class="lab icon"></i> Study
                    <i class="dropdown icon"></i>
                </div>
                <div class="content" data-bind="visible: !isSharedStudy()">
                    <div class="ui secondary vertical menu">
                        <a href="#/settings/general" class="item" data-bind="active: isActive, visible: isDeveloper()">
                            Settings
                        </a>
                        <a href="#/email_templates/verify_email" class="item" data-bind="active: isActive, visible: isDeveloper()">
                            Email Templates
                        </a>
                        <a href="#/subpopulations" class="item" data-bind="active: isActive, visible: isDeveloper()">
                            Consent Groups
                        </a>
                        <a href="#/participants" class="item" data-bind="active: isActive, visible: isResearcher()">
                            Participants
                        </a>
                        <a href="#/enrollees" class="item" data-bind="active: isActive, visible: !isPublicObs()">
                            External IDs
                        </a>
                        <a href="#/external_ids" class="item" data-bind="active: isActive, visible: isPublicObs()">
                            External IDs
                        </a>
                        <a href="#/reports/uploads" class="item" data-bind="active: isActive, visible: isDeveloper() || isResearcher()">
                            Study Reports
                        </a>
                        <a href="#/topics" class="item" data-bind="active: isActive, visible: isDeveloper() || isResearcher()">
                            Push Notifications
                        </a>
                    </div>
                </div>

                <div class="title" data-bind="visible: isDeveloper() && !isSharedStudy()">
                    <i class="server icon"></i> Study Data
                    <i class="dropdown icon"></i>
                </div>
                <div class="content" data-bind="visible: isDeveloper() && !isSharedStudy()">
                    <div class="ui secondary vertical menu">
                        <a href="#/scheduleplans" class="item" data-bind="active: isActive">
                            Scheduling
                        </a>
                        <a href="#/tasks" class="item" data-bind="active: isActive">
                            Compound Tasks
                        </a>
                        <a href="#/surveys" class="item" data-bind="active: isActive">
                            Surveys
                        </a>
                        <a href="#/task_identifiers" class="item" data-bind="active: isActive">
                            Task Identifiers
                        </a>
                    </div>
                </div>

                <div class="title" data-bind="visible: isDeveloper() && !isSharedStudy()">
                    <i class="tablet icon"></i> App Support
                    <i class="dropdown icon"></i>
                </div>
                <div class="content" data-bind="visible: isDeveloper() && !isSharedStudy()">
                    <div class="ui secondary vertical menu">
                        <a href="#/app_configs" class="item" data-bind="active: isActive">
                            App Configs
                        </a>
                        <a href="#/app_links" class="item"  data-bind="active: isActive">
                            App &amp; Universal Links
                        </a>
                    </div>
                </div>

                <div class="title" data-bind="visible: isDeveloper() && !isSharedStudy()">
                    <i class="upload icon"></i> Upload &amp; Export
                    <i class="dropdown icon"></i>
                </div>
                <div class="content" data-bind="visible: isDeveloper() && !isSharedStudy()">
                    <div class="ui secondary vertical menu">
                        <a href="#/schemas" class="item" data-bind="active: isActive">
                            Upload Schemas
                        </a>
                        <a href="#/shared_upload_metadata" class="item" data-bind="active: isActive">
                            Shared Upload Metadata
                        </a>
                        <a href="#/export_settings" class="item" data-bind="active: isActive">
                            Export Settings
                        </a>
                    </div>
                </div>

                <div class="title" data-bind="visible: isDeveloper() && isSharedStudy()">
                    <i class="server icon"></i> Shared Study Data
                    <i class="dropdown icon"></i>
                </div>
                <div class="content" data-bind="visible: isDeveloper() && isSharedStudy()">
                    <div class="ui secondary vertical menu">
                        <a href="#/shared_modules" class="item" data-bind="active: isActive">
                            Shared Modules
                        </a>
                        <a href="#/schemas" class="item" data-bind="active: isActive">
                            Data Schemas
                        </a>
                        <a href="#/surveys" class="item" data-bind="active: isActive">
                            Surveys
                        </a>
                    </div>
                </div>

                <div class="title" data-bind="visible: isAdmin() && !isSharedStudy()">
                    <i class="settings icon"></i> Administration
                    <i class="dropdown icon"></i>
                </div>
                <div class="content" data-bind="visible: isAdmin() && !isSharedStudy()">
                    <div class="ui secondary vertical menu">
                        <a href="#/admin/info" class="item" data-bind="active: isActive">
                            Study Settings
                        </a>
                        <a href="#/admin/cache" class="item" data-bind="active: isActive">
                            Cache Control
                        </a>
                    </div>
                </div>

            </div>
        </nav>
    </section>
    <footer>
        <p data-bind="{attr:{'title': environmentObs}}">
            &copy; 2015-2017 Sage Bionetworks &middot; 
            <a data-bind="click: signOut" href="#">Sign Out <i class="sign out icon"></i></a>
        </p>
    </footer>
    <div data-bind="modal: dialogObs"></div>
    
    <div class="nav-content" style="top: 4.5rem" data-bind="visible: showNavigationObs, click: hideNav">
        <i class="maximize icon"> </i>
    </div>
    <div class="nav-content" style="top: .5rem" data-bind="visible: !showNavigationObs(), click: showNav">
        <i class="minimize icon"> </i>
    </div>
</body>
</html>
